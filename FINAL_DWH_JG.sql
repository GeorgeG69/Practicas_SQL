CREATE TABLE ALUMNOS (
  ID_ALUMNO VARCHAR2(15) NOT NULL , 
  NOMBRE VARCHAR2(50) NOT NULL , 
  AP_PATERNO VARCHAR2(50) NOT NULL , 
  AP_MATERNO VARCHAR2(50) NOT NULL , 
  EMAIL VARCHAR2(90) NOT NULL , 
  CONSTRAINT ALUMNOS_PK PRIMARY KEY (ID_ALUMNO) ENABLE 
);

CREATE TABLE MATERIAS (
  ID_MATERIA VARCHAR2(10) NOT NULL , 
  NOMBRE_MATERIA VARCHAR2(30) NOT NULL , 
  CLAVE VARCHAR2(10) NOT NULL , 
  DESCRIPCION VARCHAR2(60) NOT NULL , 
  CONSTRAINT MATERIAS_PK PRIMARY KEY (ID_MATERIA) ENABLE 
);

CREATE TABLE CARRERAS (
  ID_CARRERA VARCHAR2(10) NOT NULL , 
  NOMBRE_CARRERA VARCHAR2(30) NOT NULL ,
  DESCRIPCION VARCHAR2(60) NOT NULL , 
  CONSTRAINT CARRERAS_PK PRIMARY KEY (ID_CARRERA) ENABLE 
);

CREATE TABLE PROFESORES (
  ID_PROFESOR VARCHAR2(15) NOT NULL , 
  NOMBRE VARCHAR2(50) NOT NULL , 
  AP_PATERNO VARCHAR2(50) NOT NULL , 
  AP_MATERNO VARCHAR2(50) NOT NULL , 
  EMAIL VARCHAR2(90) NOT NULL , 
  CONSTRAINT PROFESORES_PK PRIMARY KEY (ID_PROFESOR) ENABLE 
);

CREATE TABLE CAMPUS (
  ID_CAMPUS VARCHAR2(10) NOT NULL , 
  NOMBRE VARCHAR2(30) NOT NULL ,
  DESCRIPCION VARCHAR2(60) NOT NULL , 
  CONSTRAINT CAMPUS_PK PRIMARY KEY (ID_CAMPUS) ENABLE 
);

CREATE TABLE INSCRIPCIONES (
  ID_INSCRIPCION VARCHAR2(30) NOT NULL ,
  ID_ALUMNO VARCHAR2(30) NOT NULL ,  
  ID_MATERIA VARCHAR2(20) NOT NULL , 
  ID_CARRERA VARCHAR2(20) NOT NULL ,
  ID_PROFESOR VARCHAR2(20) NOT NULL ,
  ID_CAMPUS VARCHAR2(20) NOT NULL ,
  FECHA_INSCRIPCION DATE NOT NULL , 
  CONSTRAINT INSCRIPCIONES_PK PRIMARY KEY (ID_INSCRIPCION) ENABLE 
);

ALTER TABLE INSCRIPCIONES ADD CONSTRAINT INSCRIPCIONES_FK1 FOREIGN KEY (ID_ALUMNO) REFERENCES ALUMNOS (ID_ALUMNO) ENABLE;
ALTER TABLE INSCRIPCIONES ADD CONSTRAINT INSCRIPCIONES_FK2 FOREIGN KEY (ID_CAMPUS) REFERENCES CAMPUS (ID_CAMPUS) ENABLE;
ALTER TABLE INSCRIPCIONES ADD CONSTRAINT INSCRIPCIONES_FK3 FOREIGN KEY (ID_MATERIA) REFERENCES MATERIAS (ID_MATERIA) ENABLE;
ALTER TABLE INSCRIPCIONES ADD CONSTRAINT INSCRIPCIONES_FK4 FOREIGN KEY (ID_PROFESOR) REFERENCES PROFESORES (ID_PROFESOR) ENABLE;
ALTER TABLE INSCRIPCIONES ADD CONSTRAINT INSCRIPCIONES_FK5 FOREIGN KEY (ID_CARRERA) REFERENCES CARRERAS (ID_CARRERA) ENABLE;


INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) // LLAMA A LA TABLA CON SUS CAMPOS
VALUES('111111', 'JUAN', 'LOPEZ', 'LUNA', 'LUNA@HOTMAIL.COM'); // INSERTAS CONTENIDO

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('222222', 'PEDRO', 'LARA', 'GODOY', 'LARA@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('333333', 'MARISOL', 'ARTEAGA', 'GODINEZ', 'MAART@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('444444', 'KEVIN', 'LOEZA', 'TARSO', 'LOEZA@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('555555', 'FEDERICO', 'PELUCHE', 'MATA', 'PELUCHE@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('666666', 'ROSA', 'GUMY', 'CACHO', 'OSOGUMY@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('777777', 'ANTONIO', 'LOPEZ', 'PEREZ', 'AMG@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('888888', 'AGUSTIN', 'CORTES', 'PEREZ', 'SOB@HOTMAIL.COM');

INSERT INTO ALUMNOS(ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('999999', 'FEDERICO', 'CARDENAS', 'CARMONA', 'DVM@HOTMAIL.COM');

select * from ALUMNOS; // LLAMAR TABLAS.. HACER BUSQUEDA


INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('CDMX1', 'Marina', 'MARINA');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('CDMX2', 'Sur', 'ERMITA');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('CDMX3', 'Norte', 'Azcapo');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('CDMX4', 'Centro', 'Napoles');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('EDOMEX1', 'Toluca', 'Centro');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('EDOMEX2', 'Izcalli', 'Centro');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('EDOMEX3', 'Neza', '-');

INSERT INTO CAMPUS (ID_CAMPUS, nombre, descripcion)
VALUES('EDOMEX4', 'Atizapan', 'edo. mexico');

INSERT INTO CAMPUS (ID_CAMPUS, nombre, descripcion)
VALUES('EDOMEX5', 'ecatepec', 'edo. mexico');

INSERT INTO CAMPUS (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('MOR1', 'Cuernavaca', 'Centro');

select * from CAMPUS;


INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION)
VALUES('L1', 'Ing._sistemas', 'sistemas_computacionales');

INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION)
VALUES('L2', 'lic._enfermeria', 'enfermeria y nutricion');

INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION)
VALUES('L3', 'ing._ti', 'sistemas computacionales');

INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION)
VALUES('L4', 'lic._administracion', 'admon._empresas');

INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION)
VALUES('L5', 'Lic._Contaduria', 'Lic._Contaduria_Publica');

INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION) 
VALUES('L6', 'Lic._Comunicaciones', 'Lic._Comunicacion');

INSERT INTO CARRERAS(ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION) 
VALUES('L7', 'Lic._Matematicas', 'Lic._Matematicas');

select * from CARRERAS;


INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES ('1111', 'Base de Datos 2', 'BD2', 'BDD_relac_N2');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES('1112', 'Microcontroladores', 'MC1', 'Microcont');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES('1113', 'Fisica', 'T1', 'Fisica_Elem');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES('1114', 'Probabilidad y Estadistica', 'P2', '-');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES('1115', 'Calculo', 'M2', 'Calculo_Dif_e_Int');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES('1116', 'Comunicacion Oral y Escrita', 'COE2', '-');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES('1117', 'Algebra', 'M0', 'Algebra_Elem');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION)
VALUES('1118', 'MATEMATICAS', 'MAT234', 'ALGEBRA');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION)
VALUES('1119', 'BIOLOGIA', 'BIO498', 'CIENCIAS');

INSERT INTO MATERIAS(ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION)
VALUES('1120', 'BASE_DE_DATOS', 'BD738', 'DATAMINING_Y_DATAWAREHOUSE');

select * from MATERIAS;


INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('0111', 'Armando', 'Martinez', 'Gonzalez', 'amg@hotmail.com');

INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('0112', 'Sergio', 'Ortiz', 'Blandon', 'sob@hotmail.com');

INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL)
VALUES('0113', 'Dan', 'Vega', 'Mendez', 'dvm@hotmail.com');

INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0114', 'Rafael', 'Terres', 'Herrera', 'rafah@gmail.com');

INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0115', 'Oscar', 'Ramirez', 'Arreola', 'ora7@gmail.com');

INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0116', 'Arturo', 'Chavez', 'Uvera', 'acu0@gmail.com');

INSERT INTO PROFESORES (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0117', 'Sandra', 'Aguilar', 'Huerta', 'sah2@gmail.com');

select * from PROFESORES;


INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('100', '111111', '1111', 'L1', '0117', 'CDMX1', TO_DATE('2018-03-09 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('101', '111111', '1112', 'L1', '0116', 'CDMX1', TO_DATE('2018-03-09 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('102', '111111', '1116', 'L1', '0115', 'CDMX1', TO_DATE('2018-03-09 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('103', '222222', '1111', 'L2', '0114', 'CDMX2', TO_DATE('2018-03-09 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('104', '222222', '1112', 'L2', '0113', 'CDMX2', TO_DATE('2018-03-09 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('105', '222222', '1116', 'L2', '0115', 'CDMX2', TO_DATE('2018-03-09 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('106', '333333', '1111', 'L6', '0111', 'CDMX3', TO_DATE('2018-03-10 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('107', '333333', '1112', 'L6', '0112', 'CDMX3', TO_DATE('2018-03-10 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

INSERT INTO INSCRIPCIONES (ID_INSCRIPCION, ID_ALUMNO, ID_MATERIA, ID_CARRERA, ID_PROFESOR, ID_CAMPUS, FECHA_INSCRIPCION)
VALUES ('108', '333333', '1116', 'L6', '0115', 'CDMX3', TO_DATE('2018-03-10 12:20:24', 'YYYY-MM-DD HH24:MI:SS'));

select * from INSCRIPCIONES;


INSERT INTO "ALUMNOS" (ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('99999', 'Antonio', 'López', 'Pérez', 'alp@hotmail.com');
INSERT INTO "MATERIAS" (ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES ('9999', 'Matemáticas', 'Mat234', 'Algebra');
INSERT INTO "CARRERAS" (ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION) 
VALUES ('L8', 'Ing. Sistemas', 'Sistemas computacionales');
INSERT INTO "PROFESORES" (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0118', 'Armando', 'Martínez', 'González', 'amg@hotmail.com');
INSERT INTO "CAMPUS" (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('EDO4', 'Atizapán', 'Estado de Mexico');

INSERT INTO "ALUMNOS" (ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('88888', 'Agustin', 'Cortes', 'Pérez', 'acp2@hotmail.com');
INSERT INTO "MATERIAS" (ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES ('8888', 'Biologia', 'Bio498', 'Ciencias');
INSERT INTO "CARRERAS" (ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION) 
VALUES ('L9', 'Lic. Enfermeria', 'Enfermería y Nutrición');
INSERT INTO "PROFESORES" (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0119', 'Sergio', 'Ortiz', 'Blandon', 'acu@hotmail.com');
INSERT INTO "CAMPUS" (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('EDO5', 'Sur', 'CDMX');

INSERT INTO "ALUMNOS" (ID_ALUMNO, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('77777', 'Federico', 'Cárdenas', 'Carmona', 'fcc@hotmail.com');
INSERT INTO "MATERIAS" (ID_MATERIA, NOMBRE_MATERIA, CLAVE, DESCRIPCION) 
VALUES ('7777', 'Base de Datos', 'BD738', 'Datamining y Datawarehouse');
INSERT INTO "CARRERAS" (ID_CARRERA, NOMBRE_CARRERA, DESCRIPCION) 
VALUES ('L10', 'Ing. Tecnología de la Información ', 'Sistemas Computacionales');
INSERT INTO "PROFESORES" (ID_PROFESOR, NOMBRE, AP_PATERNO, AP_MATERNO, EMAIL) 
VALUES ('0120', 'Dan', 'Vega', 'Méndez', 'dvm@hotmail.com');
INSERT INTO "CAMPUS" (ID_CAMPUS, NOMBRE, DESCRIPCION) 
VALUES ('EDO6', 'Ecatepec', 'Estado de Mexico');


CREATE INDEX ALUMNOS_INDEX1 
 ON ALUMNOS (AP_PATERNO ASC, AP_MATERNO ASC, NOMBRE ASC);

CREATE INDEX CAMPUS_INDEX1 
 ON CAMPUS (NOMBRE ASC);

CREATE INDEX CARRERAS_INDEX1 
 ON CARRERAS (NOMBRE_CARRERA ASC);

CREATE INDEX INSCRIPCIONES_INDEX1 
 ON INSCRIPCIONES (ID_ALUMNO ASC);

CREATE INDEX MATERIAS_INDEX1 
 ON MATERIAS (CLAVE ASC);

CREATE INDEX PROFESORES_INDEX1 
 ON PROFESORES (AP_PATERNO ASC, AP_MATERNO ASC, NOMBRE ASC);


CREATE TABLE inscripciones (id NUMBER, FECHA DATE) 
PARTITION BY RANGE (FECHA) 
  (PARTITION p1 VALUES LESS THAN (TO_DATE('2016-01-01', 'YYYY-MM-DD')), 
   PARTITION p2 VALUES LESS THAN (TO_DATE('2017-01-01', 'YYYY-MM-DD')), 
   PARTITION p3 VALUES LESS THAN (TO_DATE('2018-01-01', 'YYYY-MM-DD')), 
   PARTITION p4 VALUES LESS THAN (MAXVALUE) 
  )

 
SELECT AP_MATERNO
FROM ALUMNOS
WHERE AP_MATERNO LIKE '%PEREZ%'

CREATE VIEW ALUMNO_PEREZ AS 
SELECT * FROM ALUMNOS WHERE AP_MATERNO='Perez' OR AP_PATERNO='Perez';

SELECT DESCRIPCION
FROM CARRERAS
WHERE DESCRIPCION LIKE '%sistemas computacionales%'

CREATE VIEW MATERIAS_SC
AS select * from MATERIAS where DESCRIPCION like '%Sistemas Computacionales%';

select *
from alumnos, carrera

select *
from alumnos, materias 

select *
from inscripciones, campus

SELECT CONCAT(b.AP_PATERNO,CONCAT(' ',CONCAT(b.AP_MATERNO,CONCAT(' ',b.NOMBRE)))) as ALUMNO,
a.no_materias,c.NOMBRE as CAMPUS, d.nombre_CARRERA as CARRERA from (
SELECT a.ID_ALUMNO,count(a.ID_MATERIA) as no_materias,
a.ID_CAMPUS,a.ID_CARRERA from inscripciones a
group by a.ID_ALUMNO,a.ID_CAMPUS,a.ID_CARRERA) a
inner join ALUMNOS b USING (ID_ALUMNO)
inner join CAMPUS c using (ID_CAMPUS)
inner join CARRERAS d using (ID_CARRERA);


SELECT b.NOMBRE_MATERIA,a.alumnos_inscritos from (
select count(ID_ALUMNO) as alumnos_inscritos,ID_MATERIA
from INSCRIPCIONES group by ID_MATERIA) a
inner join MATERIAS b USING (ID_MATERIA);

SELECT A.ID_PROFESOR,(SELECT CONCAT(AP_PATERNO,
CONCAT(' ',CONCAT(AP_MATERNO,CONCAT(' ',NOMBRE)))) 
FROM PROFESORES WHERE ID_PROFESOR=A.ID_PROFESOR ) AS NOMBRE,
COUNT(B.ID_MATERIA) AS NO_MATERIAS
FROM PROFESORES A
LEFT JOIN INSCRIPCIONES B ON A.ID_PROFESOR=B.ID_PROFESOR
GROUP BY A.ID_PROFESOR
ORDER BY NO_MATERIAS DESC;